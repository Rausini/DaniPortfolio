create table public.images (
  id uuid primary key default gen_random_uuid(),
  url text not null,
  title text,
  "order" int not null default 0,
  published boolean not null default true,
  created_at timestamp with time zone default now()
);
alter table public.images enable row level security;

-- leitura pública SOMENTE do que está published=true
create policy "Public can read published images"
on public.images
for select
using (published = true);

-- admin (logado) pode tudo
create policy "Admins can manage images"
on public.images
for all
to authenticated
using (true)
with check (true);
